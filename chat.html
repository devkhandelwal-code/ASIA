<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>A.S.I.A. â€” Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg-1:#04060a;
  --bg-2:#071022;
  --text:#dff9ff;
  --panel:rgba(10,14,20,0.86);
  --neon:#08d1ff;
  --neon-2:#0ab7ff;
  --muted:#8eaeb6;
  --glass:rgba(255,255,255,0.02);
  --accent-shadow:0 0 20px rgba(8,209,255,0.3);
  --font:'Poppins',system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
}

/* Light theme vars */
.light {
  --bg-1:#eaf8ff;
  --bg-2:#cde6f5;
  --text:#012935;
  --panel:rgba(255,255,255,0.7);
  --muted:#235066;
}

/* Reset & layout */
*{box-sizing:border-box}
body,html{height:100%;margin:0;font-family:var(--font);background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:var(--text);transition:background .3s,color .3s}
.app-shell{display:flex;flex-direction:column;height:100vh}

/* Topbar */
.topbar{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;border-bottom:1px solid rgba(255,255,255,0.05)}
.logo{font-weight:700;color:var(--neon);font-size:20px;letter-spacing:1px}
.tag{color:var(--muted);font-size:13px}
.btn{border-radius:10px;padding:8px 12px;border:none;cursor:pointer;font-weight:600}
.btn.neon{background:linear-gradient(90deg,var(--neon-2),var(--neon));color:#021318;box-shadow:var(--accent-shadow)}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--muted)}

/* Main layout */
.main{display:flex;flex:1;gap:18px;padding:18px}
.sidebar,.rightpanel{width:260px;padding:18px;border-radius:12px;background:var(--panel);backdrop-filter:blur(6px)}
.chatarea{flex:1;display:flex;flex-direction:column;border-radius:12px;background:var(--panel);overflow:hidden}

/* Messages */
.messages{flex:1;overflow:auto;padding:18px;display:flex;flex-direction:column;gap:14px;scroll-behavior:smooth}
.message{max-width:75%;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.05);animation:fadeIn .25s ease forwards}
.message.bot{align-self:flex-start;background:linear-gradient(180deg,rgba(8,209,255,0.05),rgba(8,209,255,0.02));color:var(--text)}
.message.user{align-self:flex-end;background:linear-gradient(90deg,rgba(8,209,255,0.2),rgba(8,209,255,0.1));color:#012935}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* Neon input bar */
.input-bar{display:flex;gap:12px;align-items:center;padding:16px;border-top:1px solid rgba(255,255,255,0.05);background:linear-gradient(180deg,rgba(0,0,0,0.05),transparent)}
.input-field{flex:1;position:relative}
.input-field input{
  width:100%;padding:14px 18px;border-radius:14px;border:none;outline:none;
  background:transparent;color:var(--text);font-size:16px;
  border:2px solid var(--neon);
  box-shadow:0 0 10px var(--neon-2), inset 0 0 15px rgba(8,209,255,0.2);
  transition:all 0.3s ease;
}
.input-field input:focus{
  box-shadow:0 0 20px var(--neon), inset 0 0 20px rgba(8,209,255,0.3);
}
.send-btn{min-width:88px;padding:12px 16px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--neon-2),var(--neon));color:#021318;font-weight:700;cursor:pointer;box-shadow:0 0 15px rgba(8,209,255,0.2)}
.icon-btn{width:44px;height:44px;border-radius:10px;border:1px solid rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;background:transparent;cursor:pointer;color:var(--neon)}

/* Simple theme transition */
.transition{transition:all .3s ease}
</style>
</head>
<body>
<div class="app-shell">
  <div class="topbar">
    <div class="left">
      <div class="logo">A.S.I.A.</div>
      <div class="tag">Your Smart AI Assistant</div>
    </div>
    <div class="top-actions">
      <button class="btn ghost" id="openSettings">âš™ Settings</button>
    </div>
  </div>

  <div class="main">
    <section class="chatarea">
      <div id="messages" class="messages"></div>
      <div class="input-bar">
        <div class="input-left">
          <button class="icon-btn" title="Voice">ðŸŽ¤</button>
        </div>
        <div class="input-field">
          <input id="messageInput" type="text" placeholder="Type your message..." autocomplete="off" />
        </div>
        <button id="sendBtn" class="send-btn">Send</button>
      </div>
    </section>

    <aside class="rightpanel">
      <div>
        <h3 style="color:var(--neon)">Settings</h3>
        <label style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
          <span>Dark theme</span>
          <input id="themeToggle" type="checkbox" checked />
        </label>
      </div>
    </aside>
  </div>
</div>

<script>
const API_BASE = "http://127.0.0.1:5001"; // backend Flask URL

const messagesEl = document.getElementById('messages');
const inputEl = document.getElementById('messageInput');
const sendBtn = document.getElementById('sendBtn');
const themeToggle = document.getElementById('themeToggle');

// Create chat bubble
function createMessage(role, text) {
  const el = document.createElement('div');
  el.className = `message ${role}`;
  el.innerHTML = text;
  messagesEl.appendChild(el);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

// Typing indicator
function setTyping(show) {
  let typingEl = document.getElementById('typing');
  if (show) {
    if (!typingEl) {
      typingEl = document.createElement('div');
      typingEl.id = 'typing';
      typingEl.className = 'message bot';
      typingEl.innerHTML = '<em>...A.S.I.A. is typing</em>';
      messagesEl.appendChild(typingEl);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }
  } else {
    if (typingEl) typingEl.remove();
  }
}

// Handle send
async function sendMessage() {
  const text = inputEl.value.trim();
  if (!text) return;
  createMessage('user', text);
  inputEl.value = '';
  setTyping(true);

  try {
    const res = await fetch(`${API_BASE}/chat`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: text })
    });
    const data = await res.json();
    setTyping(false);
    createMessage('bot', data.reply || '(No response)');
  } catch (err) {
    setTyping(false);
    createMessage('bot', '(Server error â€” check backend)');
    console.error(err);
  }
}

sendBtn.addEventListener('click', sendMessage);
inputEl.addEventListener('keydown', e => { if (e.key === 'Enter') sendMessage(); });

// Theme toggle
themeToggle.addEventListener('change', e => {
  document.body.classList.toggle('light', !e.target.checked);
  document.querySelector(':root').classList.add('transition');
});

// Welcome message
createMessage('bot', 'ðŸ‘‹ Hi there! Iâ€™m A.S.I.A. â€” how can I help you today?');
</script>
</body>
</html>
